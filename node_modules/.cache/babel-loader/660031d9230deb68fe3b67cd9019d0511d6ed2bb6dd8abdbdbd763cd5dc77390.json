{"ast":null,"code":"var _jsxFileName = \"/Users/adeelakram/Documents/projects/freelance/herogramtest/frontend/src/modules/mediaFiles/ViewMediaModal.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Modal, Spin, Tag } from 'antd';\nimport axiosInstance from '../../config/axiosConfig';\nimport { API_BASE_URL } from 'config/constant';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MediaViewModal = ({\n  visible,\n  onClose,\n  mediaId\n}) => {\n  _s();\n  var _media$Tags;\n  const [loading, setLoading] = useState(false);\n  const [media, setMedia] = useState(null);\n  const [mediaUrl, setMediaUrl] = useState(null);\n  const fetchMediaDetails = async () => {\n    setLoading(true);\n    try {\n      var _response$data;\n      const response = await axiosInstance.get(`/files/${mediaId}`);\n      setMedia((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.file);\n      await axiosInstance.post(`/files/${mediaId}/increment-view`);\n    } catch (error) {\n      console.error('Error fetching media details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMediaFile = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(`/files/${mediaId}/file`, {\n        responseType: 'blob'\n      });\n      const blobUrl = URL.createObjectURL(response.data);\n      setMediaUrl(blobUrl);\n    } catch (error) {\n      console.error('Error fetching media file:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (visible && mediaId) {\n      fetchMediaDetails();\n      fetchMediaFile();\n    }\n  }, [visible, mediaId]);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    visible: visible,\n    title: \"Media Details\",\n    onCancel: onClose,\n    footer: null,\n    width: 800,\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(Spin, {\n        size: \"large\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : media && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: media.filename\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"File Type:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 16\n        }, this), \" \", media.filetype]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"SharedLink:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 16\n        }, this), \" \", `${API_BASE_URL}files/shared/${media.shareableToken}`]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Tags:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 16\n        }, this), (_media$Tags = media.Tags) === null || _media$Tags === void 0 ? void 0 : _media$Tags.map((tag, index) => /*#__PURE__*/_jsxDEV(Tag, {\n          color: \"blue\",\n          children: tag === null || tag === void 0 ? void 0 : tag.tag\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"View Count:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 16\n        }, this), \" \", media.viewCount]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }, this), mediaUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: mediaUrl.endsWith('.mp4') || mediaUrl.startsWith('video/') ? /*#__PURE__*/_jsxDEV(\"video\", {\n          controls: true,\n          style: {\n            width: '100%'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"source\", {\n            src: mediaUrl,\n            type: \"video/mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this), \"Your browser does not support the video tag.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 19\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: mediaUrl,\n          alt: \"Media\",\n          style: {\n            width: '100%',\n            maxHeight: '400px',\n            objectFit: 'contain'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(MediaViewModal, \"SqazrTD5KdJNhDd/wZ4j+Nwbh80=\");\n_c = MediaViewModal;\nexport default MediaViewModal;\nvar _c;\n$RefreshReg$(_c, \"MediaViewModal\");","map":{"version":3,"names":["React","useEffect","useState","Modal","Spin","Tag","axiosInstance","API_BASE_URL","jsxDEV","_jsxDEV","MediaViewModal","visible","onClose","mediaId","_s","_media$Tags","loading","setLoading","media","setMedia","mediaUrl","setMediaUrl","fetchMediaDetails","_response$data","response","get","data","file","post","error","console","fetchMediaFile","responseType","blobUrl","URL","createObjectURL","title","onCancel","footer","width","children","style","textAlign","padding","size","fileName","_jsxFileName","lineNumber","columnNumber","filename","filetype","shareableToken","Tags","map","tag","index","color","viewCount","endsWith","startsWith","controls","src","type","alt","maxHeight","objectFit","_c","$RefreshReg$"],"sources":["/Users/adeelakram/Documents/projects/freelance/herogramtest/frontend/src/modules/mediaFiles/ViewMediaModal.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Modal, Spin, Tag } from 'antd';\nimport axiosInstance from '../../config/axiosConfig';\nimport { API_BASE_URL } from 'config/constant';\n\nconst MediaViewModal = ({ visible, onClose, mediaId }) => {\n  const [loading, setLoading] = useState(false);\n  const [media, setMedia] = useState(null);\n  const [mediaUrl, setMediaUrl] = useState(null);\n\n  const fetchMediaDetails = async () => {\n    setLoading(true);\n    try {\n      \n      const response = await axiosInstance.get(`/files/${mediaId}`);\n      setMedia(response.data?.file);\n\n      await axiosInstance.post(`/files/${mediaId}/increment-view`);\n    } catch (error) {\n      console.error('Error fetching media details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMediaFile = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(`/files/${mediaId}/file`, {\n        responseType: 'blob', \n      });\n      \n      const blobUrl = URL.createObjectURL(response.data);\n      setMediaUrl(blobUrl);\n    } catch (error) {\n      console.error('Error fetching media file:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (visible && mediaId) {\n      fetchMediaDetails();\n      fetchMediaFile();\n    }\n  }, [visible, mediaId]);\n\n  return (\n    <Modal\n      visible={visible}\n      title=\"Media Details\"\n      onCancel={onClose}\n      footer={null}\n      width={800}\n    >\n      {loading ? (\n        <div style={{ textAlign: 'center', padding: '20px' }}>\n          <Spin size=\"large\" />\n        </div>\n      ) : (\n        media && (\n          <div>\n            <h2>{media.filename}</h2>\n            <p><strong>File Type:</strong> {media.filetype}</p>\n            <p><strong>SharedLink:</strong> {`${API_BASE_URL}files/shared/${media.shareableToken}`}</p>\n            <p><strong>Tags:</strong> \n              {media.Tags?.map((tag, index) => (\n                <Tag color=\"blue\" key={index}>\n                  {tag?.tag}\n                </Tag>\n              ))}</p>\n            <p><strong>View Count:</strong> {media.viewCount}</p>\n            {mediaUrl && (\n              <div>\n                {mediaUrl.endsWith('.mp4') || mediaUrl.startsWith('video/') ? (\n                  <video controls style={{ width: '100%' }}>\n                    <source src={mediaUrl} type=\"video/mp4\" />\n                    Your browser does not support the video tag.\n                  </video>\n                ) : (\n                  <img\n                    src={mediaUrl}\n                    alt=\"Media\"\n                    style={{ width: '100%', maxHeight: '400px', objectFit: 'contain' }}\n                  />\n                )}\n              </div>\n            )}\n          </div>\n        )\n      )}\n    </Modal>\n  );\n};\n\nexport default MediaViewModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}