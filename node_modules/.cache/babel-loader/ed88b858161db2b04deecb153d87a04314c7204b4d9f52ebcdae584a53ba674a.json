{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Modal,Spin,Tag}from'antd';import axiosInstance from'../../config/axiosConfig';import{API_BASE_URL}from'config/constant';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MediaViewModal=_ref=>{var _media$Tags;let{visible,onClose,mediaId}=_ref;const[loading,setLoading]=useState(false);const[media,setMedia]=useState(null);const[mediaUrl,setMediaUrl]=useState(null);const fetchMediaDetails=async()=>{setLoading(true);try{var _response$data;const response=await axiosInstance.get(\"/files/\".concat(mediaId));setMedia((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.file);await axiosInstance.post(\"/files/\".concat(mediaId,\"/increment-view\"));}catch(error){console.error('Error fetching media details:',error);}finally{setLoading(false);}};const fetchMediaFile=async()=>{setLoading(true);try{const response=await axiosInstance.get(\"/files/\".concat(mediaId,\"/file\"),{responseType:'blob'});const blobUrl=URL.createObjectURL(response.data);setMediaUrl(blobUrl);}catch(error){console.error('Error fetching media file:',error);}finally{setLoading(false);}};useEffect(()=>{if(visible&&mediaId){fetchMediaDetails();fetchMediaFile();}},[visible,mediaId]);return/*#__PURE__*/_jsx(Modal,{visible:visible,title:\"Media Details\",onCancel:onClose,footer:null,width:800,children:loading?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'20px'},children:/*#__PURE__*/_jsx(Spin,{size:\"large\"})}):media&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:media.filename}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"File Type:\"}),\" \",media.filetype]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"SharedLink:\"}),\" \",\"\".concat(API_BASE_URL,\"files/shared/\").concat(media.shareableToken)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tags:\"}),(_media$Tags=media.Tags)===null||_media$Tags===void 0?void 0:_media$Tags.map((tag,index)=>/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:tag===null||tag===void 0?void 0:tag.tag},index))]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"View Count:\"}),\" \",media.viewCount]}),mediaUrl&&/*#__PURE__*/_jsx(\"div\",{children:mediaUrl.endsWith('.mp4')||mediaUrl.startsWith('video/')?/*#__PURE__*/_jsxs(\"video\",{controls:true,style:{width:'100%'},children:[/*#__PURE__*/_jsx(\"source\",{src:mediaUrl,type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]}):/*#__PURE__*/_jsx(\"img\",{src:mediaUrl,alt:\"Media\",style:{width:'100%',maxHeight:'400px',objectFit:'contain'}})})]})});};export default MediaViewModal;","map":{"version":3,"names":["React","useEffect","useState","Modal","Spin","Tag","axiosInstance","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","MediaViewModal","_ref","_media$Tags","visible","onClose","mediaId","loading","setLoading","media","setMedia","mediaUrl","setMediaUrl","fetchMediaDetails","_response$data","response","get","concat","data","file","post","error","console","fetchMediaFile","responseType","blobUrl","URL","createObjectURL","title","onCancel","footer","width","children","style","textAlign","padding","size","filename","filetype","shareableToken","Tags","map","tag","index","color","viewCount","endsWith","startsWith","controls","src","type","alt","maxHeight","objectFit"],"sources":["/Users/adeelakram/Documents/projects/freelance/herogramtest/frontend/src/modules/mediaFiles/ViewMediaModal.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Modal, Spin, Tag } from 'antd';\nimport axiosInstance from '../../config/axiosConfig';\nimport { API_BASE_URL } from 'config/constant';\n\nconst MediaViewModal = ({ visible, onClose, mediaId }) => {\n  const [loading, setLoading] = useState(false);\n  const [media, setMedia] = useState(null);\n  const [mediaUrl, setMediaUrl] = useState(null);\n\n  const fetchMediaDetails = async () => {\n    setLoading(true);\n    try {\n      \n      const response = await axiosInstance.get(`/files/${mediaId}`);\n      setMedia(response.data?.file);\n\n      await axiosInstance.post(`/files/${mediaId}/increment-view`);\n    } catch (error) {\n      console.error('Error fetching media details:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const fetchMediaFile = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(`/files/${mediaId}/file`, {\n        responseType: 'blob', \n      });\n      \n      const blobUrl = URL.createObjectURL(response.data);\n      setMediaUrl(blobUrl);\n    } catch (error) {\n      console.error('Error fetching media file:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (visible && mediaId) {\n      fetchMediaDetails();\n      fetchMediaFile();\n    }\n  }, [visible, mediaId]);\n\n  return (\n    <Modal\n      visible={visible}\n      title=\"Media Details\"\n      onCancel={onClose}\n      footer={null}\n      width={800}\n    >\n      {loading ? (\n        <div style={{ textAlign: 'center', padding: '20px' }}>\n          <Spin size=\"large\" />\n        </div>\n      ) : (\n        media && (\n          <div>\n            <h2>{media.filename}</h2>\n            <p><strong>File Type:</strong> {media.filetype}</p>\n            <p><strong>SharedLink:</strong> {`${API_BASE_URL}files/shared/${media.shareableToken}`}</p>\n            <p><strong>Tags:</strong> \n              {media.Tags?.map((tag, index) => (\n                <Tag color=\"blue\" key={index}>\n                  {tag?.tag}\n                </Tag>\n              ))}</p>\n            <p><strong>View Count:</strong> {media.viewCount}</p>\n            {mediaUrl && (\n              <div>\n                {mediaUrl.endsWith('.mp4') || mediaUrl.startsWith('video/') ? (\n                  <video controls style={{ width: '100%' }}>\n                    <source src={mediaUrl} type=\"video/mp4\" />\n                    Your browser does not support the video tag.\n                  </video>\n                ) : (\n                  <img\n                    src={mediaUrl}\n                    alt=\"Media\"\n                    style={{ width: '100%', maxHeight: '400px', objectFit: 'contain' }}\n                  />\n                )}\n              </div>\n            )}\n          </div>\n        )\n      )}\n    </Modal>\n  );\n};\n\nexport default MediaViewModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}